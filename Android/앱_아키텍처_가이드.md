# 앱 아키텍처 가이드
[구글 앱 아키텍처 가이드](https://developer.android.com/jetpack/docs/guide?hl=ko)를 보고 정리한 내용이다.

# 모바일 앱 사용자 환경
일반적인 프로그램은 런처의 단일 진입점이 있어서 모놀리식 프로세스로 실행한다.
하지만 Android 앱의 구조는 훨씬 복잡한 하다.
활동, 프래그먼트, 서비스, 콘텐츠 제공업체, 브로드 케스트 등의 앱 구성요소들이 유기적으로 엮어서 실행된다.

개발자는 앱 Minifast에 구성 요소들을 정의함으로 Android OS에서 이 파일을 사용하여 전반적인 사용자 환경을 통합하는 방법을 결정한다.   
이러한 방법을 사용하는 이유는 사용자는 짧은 시간 내에 여러 앱과 상호작용할 때도 많으므로 앱이 사용자 중심의 다양한 워크플로 및 작업에 맞게 조정될 수 있어야 하기 때문이다.
그리고 휴대기기는 리소스가 제한되어 있으므로 **운영체제에서 새로운 앱을 위한 공간을 확보하도록 언제든지 일부 앱 프로세스를 종료**해야 할 수 있다.

예시 
1. 앱이 카메라 인텐트를 트리거합니다. 그러면 Android OS에서 요청을 처리하기 위해 카메라 앱을 실행합니다. 
이 시점에 사용자는 소셜 네트워크 앱에서 나간 상황이지만 사용 환경은 끊김 없이 연결됩니다.
2. 카메라 앱은 파일 선택기 실행처럼 다른 인텐트를 트리거하여 다른 앱을 실행할 수도 있습니다.
3. 이후에 사용자가 다시 소셜 네트워크 앱으로 돌아와서 사진을 공유합니다.

이러한 환경을 고려할 때 구성요소는 개별적이고 비순차적으로 실행될 수 있으며, 운영체제나 사용자가 언제든지 앱 구성요소를 제거할 수 있습니다. 이러한 이벤트는 직접 제어할 수 없기 때문에 **앱 구성요소에 앱 데이터나 상태를 저장해서는 안 되며** 앱 구성요소가 서로 종속되면 안 됩니다.

# 일반 아키텍처 원칙

## 관심사 분리
**Activity 또는 Fragment에 모든 코드를 작성하는 실수는 흔히 일어납니다.**
Activity 또는 Fragment와 같은 UI 기반의 클래스는 UI 및 운영체제 상호작용을 처리하는 로직만 포함한다.
이러한 클래스는 소유의 개념이 아니라 **Android OS와 앱 사이의 계약을 나타내도록 이어주는 클래스일 뿐**이다.

### 모델 사용하기
모델은 앱의 데이터 처리를 담당하는 구성요소로 View와 같은 UI 클래스와는 동립적으로 앱의 생명주기에 영향을 받지 않는다. 
즉, 지속적이고 일관성있는 데이터 유지하려면 모델을 사용해야한다.
다음은 모델을 사용했을 때 장점이다.
* Android OS에서 리소스를 확보하기 위해 앱을 제거해도 사용자 데이터가 삭제 안된다.
* 네트워크 연결이 취약하거나 연결되어 있지 않아도 앱이 계속 작동
* 데이터 관리 책임이 잘 정의된 모델 클래스를 기반으로 앱을 만들면 쉽게 테스트하고 일관성을 유지할 수 있다.


# 권장 앱 아키텍처
![final-architecture](./final-architecture.png)
각 구성요소가 한 수준 아래의 구성요소에만 종속이 된다.
예로 Fragment는 ViewModel에 종속이고 Repository는 여러개의 다른 클래스에 (유일하게) 종속된다. 
이 설계는 일관된 사용자 경험과 앱의 특수한 환경을 유연하게 대처할 수 있다.

세부적은 구현 사항은 [MVVM](./MVVM)을 참조해도 좋고 다른 방법을 탐고 해도 좋다.



